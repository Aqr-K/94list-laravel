import"./base-sonieuUH.js";import{v as k}from"./el-loading-DqZh-wdt.js";import{E as F}from"./el-card-DSxRm4_o.js";import{E as h,a as L}from"./el-form-item-gk2EoJqp.js";import{E as R}from"./el-button-DDufFYF5.js";import{E as x}from"./el-input-CfnbBfaI.js";import{l as B}from"./user-BMVG4AFv.js";import{f as C}from"./favicon-BrYC5Vmz.js";import{d as N,g as I,r as m,c as S,w as q,e as D,f as t,h as U,o as _,i as p,u as f,t as $,j,a as o,k as g,E as A,s as M,l as T}from"./index-B8pW1vfL.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-CJFbIM6h.js";import"./index-24Q8zd9x.js";const G={class:"container"},H=["src"],J=N({__name:"LoginView",setup(K){const l=U();I()==="1"&&l.push("/admin");const v=()=>l.push("/register"),n=m(!1),a=m({username:"",password:""}),d=m(null),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},E=async u=>{if(!(!u||!await u.validate()))try{n.value=!0;const e=await B({username:a.value.username,password:a.value.password});A.success("登陆成功"),M("1");const s=e.data.role;T(s),l.push(`/${s}`)}finally{n.value=!1}};return(u,e)=>{const s=x,i=h,c=R,V=L,y=F,b=k;return _(),S("div",G,[q((_(),D(y,null,{default:t(()=>[p("h1",null,[p("img",{src:f(C),alt:"logo"},null,8,H)]),p("h2",null,"登陆 | "+$(f(j)()),1),o(V,{ref_key:"loginFormRef",ref:d,model:a.value,rules:w,"label-width":"auto"},{default:t(()=>[o(i,{label:"用户名",prop:"username"},{default:t(()=>[o(s,{modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.username=r)},null,8,["modelValue"])]),_:1}),o(i,{label:"密码",prop:"password"},{default:t(()=>[o(s,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.password=r),type:"password"},null,8,["modelValue"])]),_:1}),o(i,{class:"center"},{default:t(()=>[o(c,{type:"primary",onClick:v},{default:t(()=>[g("注册")]),_:1}),o(c,{type:"primary",onClick:e[2]||(e[2]=r=>E(d.value))},{default:t(()=>[g("登陆")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[b,n.value]])])}}}),re=z(J,[["__scopeId","data-v-34c4ebb2"]]);export{re as default};
