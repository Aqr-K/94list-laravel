const __vite__fileDeps=["assets/js/UserView-C4rkMxXY.js","assets/js/.pnpm-Mf6j6NBF.js","assets/css/.pnpm-Cz8IueYi.css","assets/css/UserView-V0M9nBA1.css","assets/js/LoginView-cMbPlVDH.js","assets/js/user-CaTbv3as.js","assets/js/favicon-BrYC5Vmz.js","assets/js/_plugin-vue_export-helper-DlAUqK2U.js","assets/css/LoginView-VnGQPPmd.css","assets/js/RegisterView-BJJT2mr5.js","assets/css/RegisterView-BZfYOUpu.css","assets/js/AdminView-VRfL9mUI.js","assets/js/NotFoundView-Bm_uhweh.js","assets/css/NotFoundView-B8o8jygP.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as L,r as S,a as A,E as u,b as P,o as w,c as b,u as I,e as O,R,f as T,g as C,h as V,i as D}from"./.pnpm-Mf6j6NBF.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();const k=L("mainStore",()=>({config:S({announce:"",user_agent:"",debug:!1,max_once:0,have_account:!1,have_login:!1,need_inv_code:!1,need_password:!1,is_https:!1})})),q="modulepreload",x=function(e){return"/"+e},g={},m=function(s,t,l){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),n=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.all(t.map(a=>{if(a=x(a),a in g)return;g[a]=!0;const d=a.endsWith(".css"),y=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${y}`))return;const i=document.createElement("link");if(i.rel=d?"stylesheet":q,d||(i.as="script",i.crossOrigin=""),i.href=a,n&&i.setAttribute("nonce",n),document.head.appendChild(i),d)return new Promise((E,v)=>{i.addEventListener("load",E),i.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>s()).catch(o=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=o,window.dispatchEvent(n),!n.defaultPrevented)throw o})},j=()=>localStorage.getItem("login_state")??"0",f=e=>localStorage.setItem("login_state",e),B=()=>localStorage.getItem("login_role")??"admin",N=e=>localStorage.setItem("login_role",e),z=async()=>(await m(()=>import("./package-Atp4vEU2.js"),[])).default.version,$=()=>{var e;return((e=document.querySelector("meta[name='app_name']"))==null?void 0:e.getAttribute("content"))??"94list-laravel"},J=()=>{const e=localStorage.getItem("aria2_config");return e?JSON.parse(e):{host:"http://localhost",port:6800,token:""}},W=e=>localStorage.setItem("aria2_config",JSON.stringify(e)),p=A.create({baseURL:"/api/v1",timeout:1/0,headers:{Accept:"application/json","Content-Type":"application/json"}});p.interceptors.response.use(e=>e.data,e=>{var t;const s=(t=e.response.data)==null?void 0:t.message;return s?s==="用户未登陆"?(u.error("登陆已过期, 请重新登陆!"),f("0"),setTimeout(()=>location.href="/login",1e3)):s==="Too Many Attempts."?u.error("请求量过大! 请等待10分钟后重试!"):s==="用户权限不足"?(u.error("用户权限不足, 请联系管理员!"),N("user"),setTimeout(()=>location.href="/user",1e3)):u.error(s):u.error("服务器异常, 请稍后再试"),Promise.reject(e.response.data)});const c=e=>typeof e=="string"?parseInt(e):e,F=()=>p.get("/parse/config"),H=async e=>{const s=await p.post("/parse/get_file_list",e);return s.data.list=s.data.list.map(t=>(t.category=c(t.category),t.fs_id=c(t.fs_id),t.isdir=c(t.isdir),t.local_ctime=c(t.local_ctime),t.local_mtime=c(t.local_mtime),t.server_ctime=c(t.local_mtime),t.server_mtime=c(t.local_mtime),t.size=c(t.size),t)),s},K=e=>p.post("/parse/download_files",e),M=P({__name:"App",setup(e){const s=k();return w(async()=>{const t=window.matchMedia("(prefers-color-scheme: dark)");l(t),t.addEventListener("change",l);function l(o){o.matches?document.querySelector("html").classList.add("dark"):document.querySelector("html").classList.remove("dark")}const r=await F();s.config={...r.data,is_https:document.location.protocol==="https:"},f(r.data.have_login?"1":"0")}),(t,l)=>(O(),b(I(R)))}}),h=T({history:C("/"),routes:[{path:"/",name:"index",redirect:"/user"},{path:"/user",name:"user",meta:{title:"前台解析中心"},component:()=>m(()=>import("./UserView-C4rkMxXY.js"),__vite__mapDeps([0,1,2,3]))},{path:"/login",name:"login",meta:{title:"登陆"},component:()=>m(()=>import("./LoginView-cMbPlVDH.js"),__vite__mapDeps([4,1,2,5,6,7,8]))},{path:"/register",name:"register",meta:{title:"注册"},component:()=>m(()=>import("./RegisterView-BJJT2mr5.js"),__vite__mapDeps([9,1,2,5,6,7,10]))},{path:"/admin",name:"admin",meta:{title:"后台控制中心"},component:()=>m(()=>import("./AdminView-VRfL9mUI.js"),__vite__mapDeps([11,1,2,5]))},{path:"/404",name:"404",meta:{title:"404页面不存在"},component:()=>m(()=>import("./NotFoundView-Bm_uhweh.js"),__vite__mapDeps([12,1,2,13]))},{path:"/:pathMatch(.*)",redirect:"/404"}]});h.beforeEach((e,s,t)=>{document.title=`${e.meta.title} | ${$()}`,t()});const _=V(M);_.use(D());_.use(h);_.mount("#app");export{m as _,$ as a,N as b,B as c,H as d,K as e,W as f,j as g,z as h,p as i,J as l,f as s,k as u};
