import{b as F,r as p,k as x,w as B,c as L,n as a,u as R,p as C,v as $,f,q as _,e as g,t as K,l as s,s as v,x as w,E as N,y as q,z as D,A as I,B as S}from"./.pnpm-BPJ2h7HZ.js";import{g as A,a as U,l as z,s as M,b as T}from"./index-DsIl7rzV.js";import{r as h,f as j}from"./registerkeyDown-DnxsfoLV.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"container"},J=["src"],O=F({__name:"LoginView",setup(P){const u=R();A()==="1"&&u.push("/admin");const y=()=>u.push("/register"),i=p(!1),t=p({username:"",password:""}),l=p(null),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},r=async m=>{if(!(!m||!await m.validate()))try{i.value=!0;const e=await z({username:t.value.username,password:t.value.password});N.success("登陆成功"),M("1");const n=e.data.role;T(n),u.push(`/${n}`)}finally{i.value=!1}};return h("Enter",()=>r(l.value)),(m,e)=>{const n=q,d=D,c=I,b=S,E=C,k=$;return f(),x("div",H,[B((f(),L(E,null,{default:a(()=>[_("h1",null,[_("img",{src:g(j),alt:"logo"},null,8,J)]),_("h2",null,"登陆 | "+K(g(U)()),1),s(b,{ref_key:"loginFormRef",ref:l,model:t.value,rules:V,"label-width":"auto"},{default:a(()=>[s(d,{label:"用户名",prop:"username"},{default:a(()=>[s(n,{modelValue:t.value.username,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.username=o),onKeyup:e[1]||(e[1]=v(o=>r(l.value),["enter"]))},null,8,["modelValue"])]),_:1}),s(d,{label:"密码",prop:"password"},{default:a(()=>[s(n,{modelValue:t.value.password,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.password=o),type:"password",onKeyup:e[3]||(e[3]=v(o=>r(l.value),["enter"]))},null,8,["modelValue"])]),_:1}),s(d,{class:"center"},{default:a(()=>[s(c,{type:"primary",onClick:e[4]||(e[4]=o=>y())},{default:a(()=>[w("注册")]),_:1}),s(c,{type:"primary",onClick:e[5]||(e[5]=o=>r(l.value))},{default:a(()=>[w("登陆")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[k,i.value]])])}}}),Z=G(O,[["__scopeId","data-v-39d88d74"]]);export{Z as default};
