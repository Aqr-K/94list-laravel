import{f as V,g as b,j as E}from"./request-1a9ba625.js";import{E as L,a as y}from"./el-form-item-70c9c3e5.js";import{E as F}from"./el-input-c4f3773c.js";import{y as P,r as f,L as R,d as S,I as k,G as N,A as B,i as C,l as a,w as s,o as I,e as d,f as o,t as q,E as U,k as A,M,N as T}from"./index-24822955.js";import{d as h}from"./admin-d7ae183d.js";import{f as j}from"./favicon-de9023fc.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const G=P("LoginPannel",()=>{const m=f({prefix:R(),username:"",password:"",pending:!1}),l=f(null);return{loginForm:m,loginFormRef:l}}),$={class:"container"},z=["src"],H=S({__name:"LoginPannel",setup(m){const l=k();N()==="1"&&l.push("/admin");const g=G(),{loginForm:e,loginFormRef:p}=B(g),_={prefix:[{required:!0,message:"请输入路由前缀",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},c=async i=>{if(!i||!await i.validate(()=>{}))return;M(e.value.prefix),e.value.pending=!0;const n=await h({username:e.value.username,password:e.value.password})??"failed";e.value.pending=!1,n.toString()!=="failed"&&(e.value.username="",e.value.password="",b.success("登陆成功"),T("1"),l.push("/admin"))};return(i,n)=>{const u=F,t=L,x=E,v=y,w=V;return I(),C("div",$,[a(w,null,{default:s(()=>[d("h1",null,[d("img",{src:o(j),alt:"logo"},null,8,z)]),d("h2",null,q(o(U)()),1),a(v,{ref_key:"loginFormRef",ref:p,model:o(e),rules:_,"label-width":"100px"},{default:s(()=>[a(t,{label:"路由前缀",prop:"prefix"},{default:s(()=>[a(u,{modelValue:o(e).prefix,"onUpdate:modelValue":n[0]||(n[0]=r=>o(e).prefix=r)},null,8,["modelValue"])]),_:1}),a(t,{label:"用户名",prop:"username"},{default:s(()=>[a(u,{modelValue:o(e).username,"onUpdate:modelValue":n[1]||(n[1]=r=>o(e).username=r)},null,8,["modelValue"])]),_:1}),a(t,{label:"密码",prop:"password"},{default:s(()=>[a(u,{modelValue:o(e).password,"onUpdate:modelValue":n[2]||(n[2]=r=>o(e).password=r)},null,8,["modelValue"])]),_:1}),a(t,{class:"center"},{default:s(()=>[a(x,{type:"primary",onClick:n[3]||(n[3]=r=>c(o(p))),disabled:o(e).pending,loading:o(e).pending},{default:s(()=>[A(" 登陆 ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}});const Z=D(H,[["__scopeId","data-v-42ff6189"]]);export{Z as default};
