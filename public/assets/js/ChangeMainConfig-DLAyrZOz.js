import"./base-DzfnSdGl.js";import{v as E}from"./el-loading-Dqc-yn7H.js";import{E as C,a as U}from"./el-form-item-Ct3QjCMy.js";import{E as x}from"./el-button-DtYNY52B.js";import{E as y}from"./el-input-BEQYXOrs.js";import{E as F}from"./el-input-number-CGQmo5vN.js";import{E as M}from"./el-switch-DWISdYF0.js";import{aa as v,d as k,r as i,O as B,w as q,o as z,e as D,f as n,a as o,k as I,aD as N,E as R}from"./index-niWMSR8p.js";import"./use-form-item-DsYTp4Yb.js";import"./index-Bbp7VP7R.js";const $=()=>v.get("/admin/config/main"),A=m=>v.patch("/admin/config/main",m),Q=k({__name:"ChangeMainConfig",setup(m){const u=i(!1),e=i({front_end_version:"",version:"",sleep:0,max_once:0,password:"",announce:"",user_agent:"",need_inv_code:!1,whitelist_mode:!1,debug:!1}),p=i(null),g={sleep:[{required:!0,message:"请输入批量解析时休眠时间(秒)",trigger:"blur"}],max_once:[{required:!0,message:"请输入批量解析时单次最大解析数量",trigger:"blur"}],user_agent:[{required:!0,message:"请输入User_Agent",trigger:"blur"}]},f=async()=>{try{u.value=!0,e.value={...(await $()).data,front_end_version:await N()}}finally{u.value=!1}},V=async d=>{if(!(!d||!await d.validate()))try{u.value=!0,await A(e.value),R.success("保存成功")}finally{u.value=!1,await f()}};return B(f),(d,l)=>{const r=y,t=C,s=M,_=F,b=x,w=U,c=E;return q((z(),D(w,{ref_key:"changeConfigFormRef",ref:p,model:e.value,rules:g,"label-width":"auto"},{default:n(()=>[o(t,{label:"前端版本号",prop:"front_end_version"},{default:n(()=>[o(r,{disabled:"",modelValue:e.value.front_end_version,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.front_end_version=a)},null,8,["modelValue"])]),_:1}),o(t,{label:"后端版本号",prop:"version"},{default:n(()=>[o(r,{disabled:"",modelValue:e.value.version,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.version=a)},null,8,["modelValue"])]),_:1}),o(t,{label:"DEBUG模式开关",prop:"debug"},{default:n(()=>[o(s,{modelValue:e.value.debug,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.debug=a),size:"large"},null,8,["modelValue"])]),_:1}),o(t,{label:"邀请码开关",prop:"need_inv_code"},{default:n(()=>[o(s,{modelValue:e.value.need_inv_code,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.need_inv_code=a),size:"large"},null,8,["modelValue"])]),_:1}),o(t,{label:"白名单模式开关",prop:"whitelist_mode"},{default:n(()=>[o(s,{modelValue:e.value.whitelist_mode,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.whitelist_mode=a),size:"large"},null,8,["modelValue"])]),_:1}),o(t,{label:"下载使用的 User_Agent",prop:"user_agent"},{default:n(()=>[o(r,{modelValue:e.value.user_agent,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.user_agent=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),o(t,{label:"批量解析时休眠时间(秒)",prop:"sleep"},{default:n(()=>[o(_,{modelValue:e.value.sleep,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.sleep=a)},null,8,["modelValue"])]),_:1}),o(t,{label:"批量解析时单次最大解析数量",prop:"max_once"},{default:n(()=>[o(_,{modelValue:e.value.max_once,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.max_once=a)},null,8,["modelValue"])]),_:1}),o(t,{label:"公告内容",prop:"announce"},{default:n(()=>[o(r,{type:"textarea",modelValue:e.value.announce,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.announce=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),o(t,{label:"密码",prop:"password"},{default:n(()=>[o(r,{modelValue:e.value.password,"onUpdate:modelValue":l[9]||(l[9]=a=>e.value.password=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),o(t,{label:" "},{default:n(()=>[o(b,{type:"primary",onClick:l[10]||(l[10]=a=>V(p.value))},{default:n(()=>[I("保存")]),_:1})]),_:1})]),_:1},8,["model"])),[[c,u.value]])}}});export{Q as default};
