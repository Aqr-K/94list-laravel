import{an as w,r as s,ao as F,E as d,ap as _}from"./index-q5nPSmrO.js";const k=w("fileListStore",()=>{const l=s(!1),o=s({shorturl:"",url:"",pwd:"",dir:"/"}),r=s(null),u=()=>{const e=o.value.dir.split("/");e.pop();const i=e.join("/");return i===""?"/":i},v=async()=>{if(!(!r.value||!await r.value.validate()))try{l.value=!0;const e=await F(o.value);t.value=e.data,o.value.dir!=="/"&&t.value.list.unshift({category:-1,fs_id:0,isdir:1,local_ctime:0,local_mtime:0,server_ctime:0,server_mtime:0,size:0,md5:"",path:u(),server_filename:"..",dlink:""}),d.success("获取文件列表成功")}finally{l.value=!1}},t=s({uk:0,shareid:0,randsk:"",list:[]}),f=s({hit_captcha:!1,vcode_id:0,vcode_img:"",vcode_input:""}),n=s([]),c=s([]);return{pending:l,vcode:f,fileList:t,getFileList:v,getFileListForm:o,getFileListFormRef:r,selectedRows:n,downloadFiles:async(e,i)=>{const m=e?[e]:n.value.map(a=>a.fs_id),p=i?[i]:n.value.map(a=>a.path);try{l.value=!0;const a={uk:t.value.uk,shareid:t.value.shareid,randsk:t.value.randsk,fs_ids:m,path_list:p},h=await _(a);c.value=h.data,d.success("解析成功")}catch{}finally{}},downloadLinks:c}});export{k as u};
