import{b as I,r as c,o as $,f as w,k as B,l as e,n,s as d,w as P,c as h,t as m,e as L,F as M,E as C,z as N,N as T,P as U,a1 as F,v as V}from"./.pnpm-DD7z4_75.js";import{i as v}from"./index-z2PUUjiU.js";import{f as A}from"./format-DaCfCw6f.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q=s=>v.get(`/admin/record?page=${s.page}&size=${s.size}`),G=s=>v.delete("/admin/record",{data:{record_ids:[s.id]}}),H=s=>v.delete("/admin/record",{data:{record_ids:s}}),J=I({__name:"RecordManagement",setup(s){const r=c(!1),u=c(15),_=c(1),p=c(),g=c([]),i=async()=>{try{r.value=!0;const o=await q({page:_.value,size:u.value});p.value=o.data}finally{r.value=!1}},R=async o=>{try{r.value=!0,await G(o),C.success("删除记录成功")}finally{r.value=!1,await i()}},k=async()=>{try{r.value=!0;const o=g.value.map(l=>l.id);await H(o),C.success("删除记录成功")}finally{r.value=!1,await i()}},D=o=>g.value=o;return $(i),(o,l)=>{var b,y,z;const f=N,a=T,S=U,x=F,E=V;return w(),B(M,null,[e(f,{type:"primary",onClick:l[0]||(l[0]=t=>i())},{default:n(()=>[d("刷新列表")]),_:1}),e(f,{type:"danger",disabled:g.value.length<=0,onClick:l[1]||(l[1]=t=>k())},{default:n(()=>[d(" 批量删除 ")]),_:1},8,["disabled"]),P((w(),h(S,{data:((b=p.value)==null?void 0:b.data)??[],border:"","show-overflow-tooltip":"",class:"table",onSelectionChange:D},{default:n(()=>[e(a,{type:"selection",width:"40"}),e(a,{prop:"id",label:"ID"}),e(a,{prop:"ip",label:"IP"}),e(a,{prop:"fs_id",label:"文件ID"}),e(a,{prop:"filename",label:"文件名"}),e(a,{prop:"size",label:"文件大小"},{default:n(({row:t})=>[d(m(L(A)(t.size)),1)]),_:1}),e(a,{prop:"url",label:"下载链接"}),e(a,{prop:"ua",label:"UA"}),e(a,{prop:"user_id",label:"用户ID"}),e(a,{prop:"normal_account_id",label:"dlink账号ID"}),e(a,{prop:"account_id",label:"reallink账号ID"}),e(a,{prop:"created_at",label:"创建时间"},{default:n(({row:t})=>[d(m(new Date(t.created_at).toLocaleString()),1)]),_:1}),e(a,{prop:"updated_at",label:"更新时间"},{default:n(({row:t})=>[d(m(new Date(t.updated_at).toLocaleString()),1)]),_:1}),e(a,{width:"150",label:"操作",fixed:"right"},{default:n(({row:t})=>[e(f,{size:"small",type:"danger",onClick:K=>R(t)},{default:n(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,r.value]]),e(x,{"current-page":_.value,"onUpdate:currentPage":l[2]||(l[2]=t=>_.value=t),"page-size":u.value,"onUpdate:pageSize":l[3]||(l[3]=t=>u.value=t),"page-sizes":[15,50,100,500,((y=p.value)==null?void 0:y.total)??100],total:((z=p.value)==null?void 0:z.total)??100,layout:"sizes, prev, pager, next",onSizeChange:i,onCurrentChange:i},null,8,["current-page","page-size","page-sizes","total"])],64)}}}),Y=j(J,[["__scopeId","data-v-04bf37b5"]]);export{Y as default};
