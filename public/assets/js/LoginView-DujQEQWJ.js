import{b as F,r as p,k as x,w as B,c as L,n as a,u as R,p as C,v as $,f as c,q as f,e as g,t as K,l as s,s as v,x as w,E as N,y as q,z as D,A as I,B as S}from"./.pnpm-CM6hScpc.js";import{g as A,a as U,l as z,s as M,b as T}from"./index-DLy4GwlQ.js";import{f as h}from"./favicon-BrYC5Vmz.js";import{r as j}from"./registerkeyDown-BdEXfbVb.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"container"},J=["src"],O=F({__name:"LoginView",setup(P){const u=R();A()==="1"&&u.push("/admin");const y=()=>u.push("/register"),i=p(!1),o=p({username:"",password:""}),l=p(null),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},n=async m=>{if(!(!m||!await m.validate()))try{i.value=!0;const e=await z({username:o.value.username,password:o.value.password});N.success("登陆成功"),M("1");const r=e.data.role;T(r),u.push(`/${r}`)}finally{i.value=!1}};return j("Enter",()=>n(l.value)),(m,e)=>{const r=q,d=D,_=I,b=S,E=C,k=$;return c(),x("div",H,[B((c(),L(E,null,{default:a(()=>[f("h1",null,[f("img",{src:g(h),alt:"logo"},null,8,J)]),f("h2",null,"登陆 | "+K(g(U)()),1),s(b,{ref_key:"loginFormRef",ref:l,model:o.value,rules:V,"label-width":"auto"},{default:a(()=>[s(d,{label:"用户名",prop:"username"},{default:a(()=>[s(r,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.username=t),onKeyup:e[1]||(e[1]=v(t=>n(l.value),["enter"]))},null,8,["modelValue"])]),_:1}),s(d,{label:"密码",prop:"password"},{default:a(()=>[s(r,{modelValue:o.value.password,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.password=t),type:"password",onKeyup:e[3]||(e[3]=v(t=>n(l.value),["enter"]))},null,8,["modelValue"])]),_:1}),s(d,{class:"center"},{default:a(()=>[s(_,{type:"primary",onClick:e[4]||(e[4]=t=>y())},{default:a(()=>[w("注册")]),_:1}),s(_,{type:"primary",onClick:e[5]||(e[5]=t=>n(l.value))},{default:a(()=>[w("登陆")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[k,i.value]])])}}}),ee=G(O,[["__scopeId","data-v-39d88d74"]]);export{ee as default};
