import"./base-sonieuUH.js";import{v as S}from"./el-loading-DqZh-wdt.js";import{E as x}from"./el-pagination-rqD1yhvC.js";import"./el-input-CfnbBfaI.js";import"./el-tag-D4crlrEn.js";import"./el-select-BOuFmw6D.js";import{E as I,a as $}from"./el-table-column-CCkEx7ov.js";import{E as B}from"./el-button-DDufFYF5.js";import{aa as f,d as L,r as p,O as M,o as y,c as P,a as e,f as n,k as c,w as T,e as U,t as w,F,E as z}from"./index-B8pW1vfL.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-24Q8zd9x.js";import"./use-form-item-CJFbIM6h.js";import"./focus-trap-Cx3G5mYf.js";import"./AdminView-BtWSCJBc.js";import"./el-card-DSxRm4_o.js";import"./user-BMVG4AFv.js";import"./vnode-CTXkDMm_.js";import"./scroll-uoENNN5t.js";const V=l=>f.get(`/admin/record?page=${l.page}&size=${l.size}`),A=l=>f.delete(`/admin/record/${l.id}`),O=l=>f.delete("/admin/record",{data:{record_ids:l}}),j=L({__name:"RecordManagement",setup(l){const r=p(!1),d=p(15),u=p(1),m=p(),_=p([]),s=async()=>{try{r.value=!0;const o=await V({page:u.value,size:d.value});m.value=o.data}finally{r.value=!1}},C=async o=>{try{r.value=!0,await A(o),z.success("删除记录成功")}finally{r.value=!1,await s()}},R=async()=>{try{r.value=!0;const o=_.value.map(i=>i.id);await O(o),z.success("删除记录成功")}finally{r.value=!1,await s()}},E=o=>_.value=o;return M(s),(o,i)=>{var v,b;const g=B,a=I,h=$,k=x,D=S;return y(),P(F,null,[e(g,{type:"primary",onClick:s},{default:n(()=>[c("刷新列表")]),_:1}),e(g,{type:"danger",disabled:_.value.length<=0,onClick:R},{default:n(()=>[c(" 批量删除 ")]),_:1},8,["disabled"]),T((y(),U(h,{data:((v=m.value)==null?void 0:v.data)??[],border:"","show-overflow-tooltip":"",class:"table",onSelectionChange:E},{default:n(()=>[e(a,{type:"selection",width:"40"}),e(a,{prop:"id",label:"ID"}),e(a,{prop:"ip",label:"IP"}),e(a,{prop:"fs_id",label:"文件ID"}),e(a,{prop:"filename",label:"文件名"}),e(a,{prop:"size",label:"文件大小"}),e(a,{prop:"url",label:"下载链接"}),e(a,{prop:"ua",label:"UA"}),e(a,{prop:"user_id",label:"用户ID"}),e(a,{prop:"account_id",label:"账号ID"}),e(a,{prop:"created_at",label:"创建时间"},{default:n(({row:t})=>[c(w(new Date(t.created_at).toLocaleString()),1)]),_:1}),e(a,{prop:"updated_at",label:"更新时间"},{default:n(({row:t})=>[c(w(new Date(t.updated_at).toLocaleString()),1)]),_:1}),e(a,{width:"150",label:"操作",fixed:"right"},{default:n(({row:t})=>[e(g,{size:"small",type:"danger",onClick:q=>C(t)},{default:n(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[D,r.value]]),e(k,{"current-page":u.value,"onUpdate:currentPage":i[0]||(i[0]=t=>u.value=t),"page-size":d.value,"onUpdate:pageSize":i[1]||(i[1]=t=>d.value=t),"page-sizes":[15,30,50,100],total:((b=m.value)==null?void 0:b.total)??100,layout:"sizes, prev, pager, next",onSizeChange:s,onCurrentChange:s},null,8,["current-page","page-size","total"])],64)}}}),pe=N(j,[["__scopeId","data-v-84b3c6d0"]]);export{pe as default};
