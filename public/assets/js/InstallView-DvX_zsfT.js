import{b as I,r as u,k as b,l as e,n as o,u as C,p as F,f as c,q as r,e as y,t as U,x as f,C as S,F as x,E as B,A as N,y as R,z as $,I as A,J as h,B as z,K as D,L as H}from"./.pnpm-BAqWpjXh.js";import{i as J,a as K}from"./index-upLIL3nz.js";import{f as O}from"./favicon-BrYC5Vmz.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j=n=>J.post("/install",n),G=n=>(D("data-v-c77698d2"),n=n(),H(),n),P={class:"container"},W=["src"],X={key:0},Y=G(()=>r("p",null,"您的后台登录账号密码均为:admin,请及时登录修改!",-1)),Z=I({__name:"InstallView",setup(n){const a=u({db_connection:"mysql",db_host:"localhost",db_port:"3306",db_database:"94list-laravel",db_username:"94list-laravel",db_password:"",app_name:"94list-laravel"}),v=u(null),L={db_connection:[{required:!0,message:"请选择安装方式",trigger:"change"}],db_host:[{required:!0,message:"请输入MySQL 数据库地址",trigger:"blur"}],db_port:[{required:!0,message:"请输入MySQL 端口",trigger:"blur"}],db_database:[{required:!0,message:"请输入MySQL 数据库名",trigger:"blur"}],db_username:[{required:!0,message:"请输入MySQL 用户名",trigger:"blur"}],app_name:[{required:!0,message:"请输入网站名称",trigger:"blur"}]},p=u(!1),m=u(!1),q=async i=>{if(!(!i||!await i.validate()))try{p.value=!0,await j(a.value),B.success("安装成功!"),m.value=!0}finally{p.value=!1}},g=C(),w=()=>g.push("/"),M=()=>g.push("/login");return(i,l)=>{const _=N,d=R,s=$,V=A,Q=h,k=z,E=F;return c(),b("div",P,[e(E,null,{default:o(()=>[r("h1",null,[r("img",{src:y(O),alt:"logo"},null,8,W)]),r("h2",null,"安装 | "+U(y(K)()),1),m.value?(c(),b("h3",X,[Y,e(_,{type:"primary",onClick:l[0]||(l[0]=t=>w())},{default:o(()=>[f("访问首页")]),_:1}),e(_,{type:"success",onClick:l[1]||(l[1]=t=>M())},{default:o(()=>[f("访问后台")]),_:1})])):S("",!0),e(k,{ref_key:"installFormRef",ref:v,model:a.value,rules:L,disabled:m.value,"label-width":"auto"},{default:o(()=>[e(s,{label:"网站名称",prop:"app_name"},{default:o(()=>[e(d,{modelValue:a.value.app_name,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.app_name=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"数据库驱动",prop:"db_connection"},{default:o(()=>[e(Q,{modelValue:a.value.db_connection,"onUpdate:modelValue":l[3]||(l[3]=t=>a.value.db_connection=t),placeholder:"请选择数据库驱动"},{default:o(()=>[e(V,{label:"MySQL",value:"mysql"}),e(V,{label:"SQLite",value:"sqlite"})]),_:1},8,["modelValue"])]),_:1}),a.value.db_connection==="mysql"?(c(),b(x,{key:0},[e(s,{label:"MySQL 数据库地址",prop:"db_host"},{default:o(()=>[e(d,{modelValue:a.value.db_host,"onUpdate:modelValue":l[4]||(l[4]=t=>a.value.db_host=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"MySQL 端口",prop:"db_port"},{default:o(()=>[e(d,{modelValue:a.value.db_port,"onUpdate:modelValue":l[5]||(l[5]=t=>a.value.db_port=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"MySQL 数据库名",prop:"db_database"},{default:o(()=>[e(d,{modelValue:a.value.db_database,"onUpdate:modelValue":l[6]||(l[6]=t=>a.value.db_database=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"MySQL 用户名",prop:"db_username"},{default:o(()=>[e(d,{modelValue:a.value.db_username,"onUpdate:modelValue":l[7]||(l[7]=t=>a.value.db_username=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"MySQL 密码",prop:"db_password"},{default:o(()=>[e(d,{modelValue:a.value.db_password,"onUpdate:modelValue":l[8]||(l[8]=t=>a.value.db_password=t)},null,8,["modelValue"])]),_:1})],64)):S("",!0),e(s,{class:"center"},{default:o(()=>[e(_,{type:"primary",onClick:l[9]||(l[9]=t=>q(v.value)),loading:p.value},{default:o(()=>[f(" 安装 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","disabled"])]),_:1})])}}}),oe=T(Z,[["__scopeId","data-v-c77698d2"]]);export{oe as default};
