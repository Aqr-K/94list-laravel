import{b as I,r as i,o as $,f as w,k as P,l as e,n as r,s as c,w as h,c as B,t as z,F as L,E as C,z as M,N,P as T,a1 as U,v as F}from"./.pnpm-DD7z4_75.js";import{i as f}from"./index-BcV2TJtA.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A=n=>f.get(`/admin/record?page=${n.page}&size=${n.size}`),j=n=>f.delete("/admin/record",{data:{record_ids:[n.id]}}),q=n=>f.delete("/admin/record",{data:{record_ids:n}}),G=I({__name:"RecordManagement",setup(n){const s=i(!1),u=i(15),_=i(1),p=i(),g=i([]),d=async()=>{try{s.value=!0;const o=await A({page:_.value,size:u.value});p.value=o.data}finally{s.value=!1}},R=async o=>{try{s.value=!0,await j(o),C.success("删除记录成功")}finally{s.value=!1,await d()}},k=async()=>{try{s.value=!0;const o=g.value.map(l=>l.id);await q(o),C.success("删除记录成功")}finally{s.value=!1,await d()}},D=o=>g.value=o;return $(d),(o,l)=>{var m,b,y;const v=M,a=N,S=T,x=U,E=F;return w(),P(L,null,[e(v,{type:"primary",onClick:l[0]||(l[0]=t=>d())},{default:r(()=>[c("刷新列表")]),_:1}),e(v,{type:"danger",disabled:g.value.length<=0,onClick:l[1]||(l[1]=t=>k())},{default:r(()=>[c(" 批量删除 ")]),_:1},8,["disabled"]),h((w(),B(S,{data:((m=p.value)==null?void 0:m.data)??[],border:"","show-overflow-tooltip":"",class:"table",onSelectionChange:D},{default:r(()=>[e(a,{type:"selection",width:"40"}),e(a,{prop:"id",label:"ID"}),e(a,{prop:"ip",label:"IP"}),e(a,{prop:"fs_id",label:"文件ID"}),e(a,{prop:"filename",label:"文件名"}),e(a,{prop:"size",label:"文件大小"}),e(a,{prop:"url",label:"下载链接"}),e(a,{prop:"ua",label:"UA"}),e(a,{prop:"user_id",label:"用户ID"}),e(a,{prop:"normal_account_id",label:"dlink账号ID"}),e(a,{prop:"account_id",label:"reallink账号ID"}),e(a,{prop:"created_at",label:"创建时间"},{default:r(({row:t})=>[c(z(new Date(t.created_at).toLocaleString()),1)]),_:1}),e(a,{prop:"updated_at",label:"更新时间"},{default:r(({row:t})=>[c(z(new Date(t.updated_at).toLocaleString()),1)]),_:1}),e(a,{width:"150",label:"操作",fixed:"right"},{default:r(({row:t})=>[e(v,{size:"small",type:"danger",onClick:H=>R(t)},{default:r(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,s.value]]),e(x,{"current-page":_.value,"onUpdate:currentPage":l[2]||(l[2]=t=>_.value=t),"page-size":u.value,"onUpdate:pageSize":l[3]||(l[3]=t=>u.value=t),"page-sizes":[15,50,100,500,((b=p.value)==null?void 0:b.total)??100],total:((y=p.value)==null?void 0:y.total)??100,layout:"sizes, prev, pager, next",onSizeChange:d,onCurrentChange:d},null,8,["current-page","page-size","page-sizes","total"])],64)}}}),Q=V(G,[["__scopeId","data-v-32138876"]]);export{Q as default};
