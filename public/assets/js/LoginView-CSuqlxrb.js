import"./base-ByW8jBp4.js";import{v as k}from"./el-loading-DZ7aAvs5.js";import{E as F}from"./el-card-COj0nMSe.js";import{E as L,a as R}from"./el-form-item-Dlr1zLGR.js";import{E as x}from"./el-button-Dx7S_srm.js";import{E as B}from"./el-input-Cfcxms0_.js";import{l as C}from"./user-BllPEY18.js";import{f as h}from"./favicon-BrYC5Vmz.js";import{d as N,g as I,r as m,c as S,w as $,e as q,f as a,h as D,o as f,i as p,u as _,t as U,j,a as o,k as g,E as A,s as M,l as T}from"./index-CUfiTvNe.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-JWbWLwGP.js";import"./index-CdeJMTo1.js";const G={class:"container"},H=["src"],J=N({__name:"LoginView",setup(K){const l=D();I()==="1"&&l.push("/admin");const v=()=>l.push("/register"),n=m(!1),t=m({username:"",password:""}),d=m(null),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},E=async u=>{if(!(!u||!await u.validate()))try{n.value=!0;const e=await C({username:t.value.username,password:t.value.password});A.success("登陆成功"),M("1");const s=e.data.role;T(s),l.push(`/${s}`)}finally{n.value=!1}};return(u,e)=>{const s=B,i=L,c=x,V=R,y=F,b=k;return f(),S("div",G,[$((f(),q(y,null,{default:a(()=>[p("h1",null,[p("img",{src:_(h),alt:"logo"},null,8,H)]),p("h2",null,"登陆 | "+U(_(j)()),1),o(V,{ref_key:"loginFormRef",ref:d,model:t.value,rules:w,"label-width":"auto"},{default:a(()=>[o(i,{label:"用户名",prop:"username"},{default:a(()=>[o(s,{modelValue:t.value.username,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.username=r)},null,8,["modelValue"])]),_:1}),o(i,{label:"密码",prop:"password"},{default:a(()=>[o(s,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.password=r),type:"password"},null,8,["modelValue"])]),_:1}),o(i,{class:"center"},{default:a(()=>[o(c,{type:"primary",onClick:e[2]||(e[2]=r=>v())},{default:a(()=>[g("注册")]),_:1}),o(c,{type:"primary",onClick:e[3]||(e[3]=r=>E(d.value))},{default:a(()=>[g("登陆")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[b,n.value]])])}}}),re=z(J,[["__scopeId","data-v-35e85a93"]]);export{re as default};
