import{b as U,r as i,o as C,w as x,f as y,c as E,n as o,l as a,x as F,E as M,y as B,z as k,V as z,W as A,A as N,B as q,v as I}from"./.pnpm-TARA5JeW.js";import{i as v,n as R}from"./index--d9Pblwj.js";const $=()=>v.get("/admin/config/main"),D=m=>v.patch("/admin/config/main",m),S=U({__name:"ChangeMainConfig",setup(m){const d=i(!1),l=i({front_end_version:"",version:"",sleep:0,max_once:0,password:"",announce:"",user_agent:"",need_inv_code:!1,whitelist_mode:!1,debug:!1,name:""}),p=i(null),g={sleep:[{required:!0,message:"请输入批量解析时休眠时间(秒)",trigger:"blur"}],max_once:[{required:!0,message:"请输入批量解析时单次最大解析数量",trigger:"blur"}],user_agent:[{required:!0,message:"请输入User_Agent",trigger:"blur"}]},_=async()=>{try{d.value=!0;const e=(await $()).data;l.value={...e,front_end_version:await R(),announce:e.announce.replaceAll("[NextLine]",`
`)}}finally{d.value=!1}},V=async r=>{if(!(!r||!await r.validate()))try{d.value=!0,await D(l.value),M.success("保存成功")}finally{d.value=!1,await _()}};return C(_),(r,e)=>{const u=B,t=k,s=z,f=A,b=N,c=q,w=I;return x((y(),E(c,{ref_key:"changeConfigFormRef",ref:p,model:l.value,rules:g,"label-width":"auto"},{default:o(()=>[a(t,{label:"前端版本号",prop:"front_end_version"},{default:o(()=>[a(u,{disabled:"",modelValue:l.value.front_end_version,"onUpdate:modelValue":e[0]||(e[0]=n=>l.value.front_end_version=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"后端版本号",prop:"version"},{default:o(()=>[a(u,{disabled:"",modelValue:l.value.version,"onUpdate:modelValue":e[1]||(e[1]=n=>l.value.version=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"DEBUG模式开关",prop:"debug"},{default:o(()=>[a(s,{modelValue:l.value.debug,"onUpdate:modelValue":e[2]||(e[2]=n=>l.value.debug=n),size:"large"},null,8,["modelValue"])]),_:1}),a(t,{label:"邀请码开关",prop:"need_inv_code"},{default:o(()=>[a(s,{modelValue:l.value.need_inv_code,"onUpdate:modelValue":e[3]||(e[3]=n=>l.value.need_inv_code=n),size:"large"},null,8,["modelValue"])]),_:1}),a(t,{label:"白名单模式开关",prop:"whitelist_mode"},{default:o(()=>[a(s,{modelValue:l.value.whitelist_mode,"onUpdate:modelValue":e[4]||(e[4]=n=>l.value.whitelist_mode=n),size:"large"},null,8,["modelValue"])]),_:1}),a(t,{label:"站点名称",prop:"name"},{default:o(()=>[a(u,{modelValue:l.value.name,"onUpdate:modelValue":e[5]||(e[5]=n=>l.value.name=n),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),a(t,{label:"下载使用的 User_Agent",prop:"user_agent"},{default:o(()=>[a(u,{modelValue:l.value.user_agent,"onUpdate:modelValue":e[6]||(e[6]=n=>l.value.user_agent=n),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),a(t,{label:"批量解析时休眠时间(秒)",prop:"sleep"},{default:o(()=>[a(f,{modelValue:l.value.sleep,"onUpdate:modelValue":e[7]||(e[7]=n=>l.value.sleep=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"批量解析时单次最大解析数量",prop:"max_once"},{default:o(()=>[a(f,{modelValue:l.value.max_once,"onUpdate:modelValue":e[8]||(e[8]=n=>l.value.max_once=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"公告内容",prop:"announce"},{default:o(()=>[a(u,{type:"textarea",modelValue:l.value.announce,"onUpdate:modelValue":e[9]||(e[9]=n=>l.value.announce=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"密码",prop:"password"},{default:o(()=>[a(u,{modelValue:l.value.password,"onUpdate:modelValue":e[10]||(e[10]=n=>l.value.password=n),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),a(t,{label:" "},{default:o(()=>[a(b,{type:"primary",onClick:e[11]||(e[11]=n=>V(p.value))},{default:o(()=>[F("保存")]),_:1})]),_:1})]),_:1},8,["model"])),[[w,d.value]])}}});export{S as default};
