import{b as E,r as m,j as F,w as x,c as L,m as o,n as R,p as B,v as C,e as _,q as d,u as f,t as N,k as s,s as g,E as h,x as q,y as I,z as S,A as $}from"./.pnpm-Mf6j6NBF.js";import{l as A}from"./user-jl_WW2K6.js";import{f as D}from"./favicon-BrYC5Vmz.js";import{g as U,a as j,s as z,b as M}from"./index-BgchkrXJ.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"container"},H=["src"],J=E({__name:"LoginView",setup(K){const r=R();U()==="1"&&r.push("/admin");const v=()=>r.push("/register"),n=m(!1),a=m({username:"",password:""}),p=m(null),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},y=async u=>{if(!(!u||!await u.validate()))try{n.value=!0;const e=await A({username:a.value.username,password:a.value.password});h.success("登陆成功"),z("1");const t=e.data.role;M(t),r.push(`/${t}`)}finally{n.value=!1}};return(u,e)=>{const t=q,i=I,c=S,V=$,b=B,k=C;return _(),F("div",G,[x((_(),L(b,null,{default:o(()=>[d("h1",null,[d("img",{src:f(D),alt:"logo"},null,8,H)]),d("h2",null,"登陆 | "+N(f(j)()),1),s(V,{ref_key:"loginFormRef",ref:p,model:a.value,rules:w,"label-width":"auto"},{default:o(()=>[s(i,{label:"用户名",prop:"username"},{default:o(()=>[s(t,{modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.username=l)},null,8,["modelValue"])]),_:1}),s(i,{label:"密码",prop:"password"},{default:o(()=>[s(t,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.password=l),type:"password"},null,8,["modelValue"])]),_:1}),s(i,{class:"center"},{default:o(()=>[s(c,{type:"primary",onClick:e[2]||(e[2]=l=>v())},{default:o(()=>[g("注册")]),_:1}),s(c,{type:"primary",onClick:e[3]||(e[3]=l=>y(p.value))},{default:o(()=>[g("登陆")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[k,n.value]])])}}}),Y=T(J,[["__scopeId","data-v-35e85a93"]]);export{Y as default};
