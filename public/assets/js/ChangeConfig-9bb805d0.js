import{C as Q,I as R,U as M,t as Ve,d as ce}from"./base-8da118dd.js";import{v as Pe}from"./el-loading-04f8397e.js";import{E as Ae,a as Te}from"./el-form-item-a5087132.js";import{E as Be}from"./el-button-c98be082.js";import{E as ye}from"./el-input-aab76947.js";import{a7 as ve,a as X,r as H,N as Fe,g as S,G as le,o as fe,J as Ue,e as m,c as B,P as me,u as e,n as C,af as W,b as d,w as f,R as w,i as A,a6 as j,L as oe,p as se,a5 as Y,z as ue,j as ge,H as ze,ag as be,I as De,d as Me,m as Oe,q as xe,B as Ke}from"./index-5feb174a.js";import{b as Re,c as qe,e as Le}from"./admin-2e0e7f01.js";import{b as we,y as $e,n as k,C as Ge,u as Ie,l as ne,D as He,F as Ye,f as D,G as We,p as je,_ as Ne,w as Se,t as ae,d as Je,H as re,I as Qe,z as Xe,E as de}from"./request-8bfac485.js";import{i as Ze}from"./validator-5b18e654.js";import{a as Ce,u as ke,b as Ee,c as et}from"./use-form-item-c4555cb1.js";import{u as tt}from"./index-183e2613.js";import{i as J}from"./isNil-c75b1b34.js";import"./_initCloneObject-584d905d.js";const nt=100,at=600,he={beforeMount(s,P){const n=P.value,{interval:a=nt,delay:O=at}=ve(n)?{}:n;let v,N;const r=()=>ve(n)?n():n.handler(),E=()=>{N&&(clearTimeout(N),N=void 0),v&&(clearInterval(v),v=void 0)};s.addEventListener("mousedown",I=>{I.button===0&&(E(),r(),document.addEventListener("mouseup",()=>E(),{once:!0}),N=setTimeout(()=>{v=setInterval(()=>{r()},a)},O))})}},lt=we({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:$e,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:s=>s===null||k(s)||["min","max"].includes(s),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:s=>s>=0&&s===Number.parseInt(`${s}`,10)},validateEvent:{type:Boolean,default:!0}}),ot={[Q]:(s,P)=>P!==s,blur:s=>s instanceof FocusEvent,focus:s=>s instanceof FocusEvent,[R]:s=>k(s)||J(s),[M]:s=>k(s)||J(s)},rt=["aria-label","onKeydown"],it=["aria-label","onKeydown"],st=X({name:"ElInputNumber"}),ut=X({...st,props:lt,emits:ot,setup(s,{expose:P,emit:n}){const a=s,{t:O}=Ge(),v=Ie("input-number"),N=H(),r=Fe({currentValue:a.modelValue,userInput:null}),{formItem:E}=Ce(),I=S(()=>k(a.modelValue)&&a.modelValue<=a.min),i=S(()=>k(a.modelValue)&&a.modelValue>=a.max),g=S(()=>{const t=q(a.step);return ne(a.precision)?Math.max(q(a.modelValue),t):(t>a.precision,a.precision)}),p=S(()=>a.controls&&a.controlsPosition==="right"),F=ke(),T=Ee(),x=S(()=>{if(r.userInput!==null)return r.userInput;let t=r.currentValue;if(J(t))return"";if(k(t)){if(Number.isNaN(t))return"";ne(a.precision)||(t=t.toFixed(a.precision))}return t}),K=(t,o)=>{if(ne(o)&&(o=g.value),o===0)return Math.round(t);let c=String(t);const V=c.indexOf(".");if(V===-1||!c.replace(".","").split("")[V+o])return t;const ee=c.length;return c.charAt(ee-1)==="5"&&(c=`${c.slice(0,Math.max(0,ee-1))}6`),Number.parseFloat(Number(c).toFixed(o))},q=t=>{if(J(t))return 0;const o=t.toString(),c=o.indexOf(".");let V=0;return c!==-1&&(V=o.length-c-1),V},u=(t,o=1)=>k(t)?K(t+a.step*o):r.currentValue,b=()=>{if(a.readonly||T.value||i.value)return;const t=Number(x.value)||0,o=u(t);$(o),n(R,r.currentValue)},z=()=>{if(a.readonly||T.value||I.value)return;const t=Number(x.value)||0,o=u(t,-1);$(o),n(R,r.currentValue)},L=(t,o)=>{const{max:c,min:V,step:y,precision:U,stepStrictly:ee,valueOnClear:te}=a;c<V&&Ve("InputNumber","min should not be greater than max.");let _=Number(t);if(J(t)||Number.isNaN(_))return null;if(t===""){if(te===null)return null;_=oe(te)?{min:V,max:c}[te]:te}return ee&&(_=K(Math.round(_/y)*y,U)),ne(U)||(_=K(_,U)),(_>c||_<V)&&(_=_>c?c:V,o&&n(M,_)),_},$=(t,o=!0)=>{var c;const V=r.currentValue,y=L(t);if(!o){n(M,y);return}V!==y&&(r.userInput=null,n(M,y),n(Q,y,V),a.validateEvent&&((c=E==null?void 0:E.validate)==null||c.call(E,"change").catch(U=>ce())),r.currentValue=y)},ie=t=>{r.userInput=t;const o=t===""?null:Number(t);n(R,o),$(o,!1)},l=t=>{const o=t!==""?Number(t):"";(k(o)&&!Number.isNaN(o)||t==="")&&$(o),r.userInput=null},h=()=>{var t,o;(o=(t=N.value)==null?void 0:t.focus)==null||o.call(t)},G=()=>{var t,o;(o=(t=N.value)==null?void 0:t.blur)==null||o.call(t)},Z=t=>{n("focus",t)},_e=t=>{var o;n("blur",t),a.validateEvent&&((o=E==null?void 0:E.validate)==null||o.call(E,"blur").catch(c=>ce()))};return le(()=>a.modelValue,t=>{const o=L(r.userInput),c=L(t,!0);!k(o)&&(!o||o!==c)&&(r.currentValue=c,r.userInput=null)},{immediate:!0}),fe(()=>{var t;const{min:o,max:c,modelValue:V}=a,y=(t=N.value)==null?void 0:t.input;if(y.setAttribute("role","spinbutton"),Number.isFinite(c)?y.setAttribute("aria-valuemax",String(c)):y.removeAttribute("aria-valuemax"),Number.isFinite(o)?y.setAttribute("aria-valuemin",String(o)):y.removeAttribute("aria-valuemin"),y.setAttribute("aria-valuenow",r.currentValue||r.currentValue===0?String(r.currentValue):""),y.setAttribute("aria-disabled",String(T.value)),!k(V)&&V!=null){let U=Number(V);Number.isNaN(U)&&(U=null),n(M,U)}}),Ue(()=>{var t,o;const c=(t=N.value)==null?void 0:t.input;c==null||c.setAttribute("aria-valuenow",`${(o=r.currentValue)!=null?o:""}`)}),P({focus:h,blur:G}),(t,o)=>(m(),B("div",{class:C([e(v).b(),e(v).m(e(F)),e(v).is("disabled",e(T)),e(v).is("without-controls",!t.controls),e(v).is("controls-right",e(p))]),onDragstart:o[1]||(o[1]=j(()=>{},["prevent"]))},[t.controls?me((m(),B("span",{key:0,role:"button","aria-label":e(O)("el.inputNumber.decrease"),class:C([e(v).e("decrease"),e(v).is("disabled",e(I))]),onKeydown:W(z,["enter"])},[d(e(D),null,{default:f(()=>[e(p)?(m(),w(e(He),{key:0})):(m(),w(e(Ye),{key:1}))]),_:1})],42,rt)),[[e(he),z]]):A("v-if",!0),t.controls?me((m(),B("span",{key:1,role:"button","aria-label":e(O)("el.inputNumber.increase"),class:C([e(v).e("increase"),e(v).is("disabled",e(i))]),onKeydown:W(b,["enter"])},[d(e(D),null,{default:f(()=>[e(p)?(m(),w(e(We),{key:0})):(m(),w(e(je),{key:1}))]),_:1})],42,it)),[[e(he),b]]):A("v-if",!0),d(e(ye),{id:t.id,ref_key:"input",ref:N,type:"number",step:t.step,"model-value":e(x),placeholder:t.placeholder,readonly:t.readonly,disabled:e(T),size:e(F),max:t.max,min:t.min,name:t.name,label:t.label,"validate-event":!1,onWheel:o[0]||(o[0]=j(()=>{},["prevent"])),onKeydown:[W(j(b,["prevent"]),["up"]),W(j(z,["prevent"]),["down"])],onBlur:_e,onFocus:Z,onInput:ie,onChange:l},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var dt=Ne(ut,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const ct=Se(dt),mt=we({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:Ze},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:ae},activeActionIcon:{type:ae},activeIcon:{type:ae},inactiveIcon:{type:ae},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Je(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1}}),pt={[M]:s=>re(s)||oe(s)||k(s),[Q]:s=>re(s)||oe(s)||k(s),[R]:s=>re(s)||oe(s)||k(s)},ft=["onClick"],vt=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],gt=["aria-hidden"],bt=["aria-hidden"],ht=["aria-hidden"],pe="ElSwitch",Vt=X({name:pe}),yt=X({...Vt,props:mt,emits:pt,setup(s,{expose:P,emit:n}){const a=s,O=De(),{formItem:v}=Ce(),N=ke(),r=Ie("switch");(l=>{l.forEach(h=>{tt({from:h[0],replacement:h[1],scope:pe,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},S(()=>{var G;return!!((G=O.vnode.props)!=null&&G[h[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:I}=et(a,{formItemContext:v}),i=Ee(S(()=>a.loading)),g=H(a.modelValue!==!1),p=H(),F=H(),T=S(()=>[r.b(),r.m(N.value),r.is("disabled",i.value),r.is("checked",b.value)]),x=S(()=>[r.e("label"),r.em("label","left"),r.is("active",!b.value)]),K=S(()=>[r.e("label"),r.em("label","right"),r.is("active",b.value)]),q=S(()=>({width:Qe(a.width)}));le(()=>a.modelValue,()=>{g.value=!0}),le(()=>a.value,()=>{g.value=!1});const u=S(()=>g.value?a.modelValue:a.value),b=S(()=>u.value===a.activeValue);[a.activeValue,a.inactiveValue].includes(u.value)||(n(M,a.inactiveValue),n(Q,a.inactiveValue),n(R,a.inactiveValue)),le(b,l=>{var h;p.value.checked=l,a.validateEvent&&((h=v==null?void 0:v.validate)==null||h.call(v,"change").catch(G=>ce()))});const z=()=>{const l=b.value?a.inactiveValue:a.activeValue;n(M,l),n(Q,l),n(R,l),ze(()=>{p.value.checked=b.value})},L=()=>{if(i.value)return;const{beforeChange:l}=a;if(!l){z();return}const h=l();[be(h),re(h)].includes(!0)||Ve(pe,"beforeChange must return type `Promise<boolean>` or `boolean`"),be(h)?h.then(Z=>{Z&&z()}).catch(Z=>{}):h&&z()},$=S(()=>r.cssVarBlock({...a.activeColor?{"on-color":a.activeColor}:null,...a.inactiveColor?{"off-color":a.inactiveColor}:null,...a.borderColor?{"border-color":a.borderColor}:null})),ie=()=>{var l,h;(h=(l=p.value)==null?void 0:l.focus)==null||h.call(l)};return fe(()=>{p.value.checked=b.value}),P({focus:ie,checked:b}),(l,h)=>(m(),B("div",{class:C(e(T)),style:ge(e($)),onClick:j(L,["prevent"])},[se("input",{id:e(I),ref_key:"input",ref:p,class:C(e(r).e("input")),type:"checkbox",role:"switch","aria-checked":e(b),"aria-disabled":e(i),name:l.name,"true-value":l.activeValue,"false-value":l.inactiveValue,disabled:e(i),tabindex:l.tabindex,onChange:z,onKeydown:W(L,["enter"])},null,42,vt),!l.inlinePrompt&&(l.inactiveIcon||l.inactiveText)?(m(),B("span",{key:0,class:C(e(x))},[l.inactiveIcon?(m(),w(e(D),{key:0},{default:f(()=>[(m(),w(Y(l.inactiveIcon)))]),_:1})):A("v-if",!0),!l.inactiveIcon&&l.inactiveText?(m(),B("span",{key:1,"aria-hidden":e(b)},ue(l.inactiveText),9,gt)):A("v-if",!0)],2)):A("v-if",!0),se("span",{ref_key:"core",ref:F,class:C(e(r).e("core")),style:ge(e(q))},[l.inlinePrompt?(m(),B("div",{key:0,class:C(e(r).e("inner"))},[l.activeIcon||l.inactiveIcon?(m(),w(e(D),{key:0,class:C(e(r).is("icon"))},{default:f(()=>[(m(),w(Y(e(b)?l.activeIcon:l.inactiveIcon)))]),_:1},8,["class"])):l.activeText||l.inactiveText?(m(),B("span",{key:1,class:C(e(r).is("text")),"aria-hidden":!e(b)},ue(e(b)?l.activeText:l.inactiveText),11,bt)):A("v-if",!0)],2)):A("v-if",!0),se("div",{class:C(e(r).e("action"))},[l.loading?(m(),w(e(D),{key:0,class:C(e(r).is("loading"))},{default:f(()=>[d(e(Xe))]),_:1},8,["class"])):l.activeActionIcon&&e(b)?(m(),w(e(D),{key:1},{default:f(()=>[(m(),w(Y(l.activeActionIcon)))]),_:1})):l.inactiveActionIcon&&!e(b)?(m(),w(e(D),{key:2},{default:f(()=>[(m(),w(Y(l.inactiveActionIcon)))]),_:1})):A("v-if",!0)],2)],6),!l.inlinePrompt&&(l.activeIcon||l.activeText)?(m(),B("span",{key:1,class:C(e(K))},[l.activeIcon?(m(),w(e(D),{key:0},{default:f(()=>[(m(),w(Y(l.activeIcon)))]),_:1})):A("v-if",!0),!l.activeIcon&&l.activeText?(m(),B("span",{key:1,"aria-hidden":!e(b)},ue(l.activeText),9,ht)):A("v-if",!0)],2)):A("v-if",!0)],14,ft))}});var wt=Ne(yt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const It=Se(wt);const Nt=Me("ChangeConfig",()=>{const s=H({version:"",userAgent:"",sleep:1,maxOnce:20,announceSwitch:!1,announce:"",cookie:"",ssl:!1,prefix:"/admin",debug:!1,password:"",passwordSwitch:!1,getPending:!1,changePending:!1}),P=H(null);return{changeConfigForm:s,changeConfigFormRef:P}}),Mt=X({__name:"ChangeConfig",setup(s){const P=Nt(),{changeConfigForm:n,changeConfigFormRef:a}=Oe(P),N={userAgent:[{required:!0,message:"请输入User_Agent",trigger:"blur"}],announce:[{validator:(I,i,g)=>{n.value.passwordSwitch&&i===""&&g(new Error("请输入公告内容")),g()},trigger:"blur"}],announceSwitch:[{required:!0,message:"请确认开关状态",trigger:"blur"}],debug:[{required:!0,message:"请确认开关状态",trigger:"blur"}],ssl:[{required:!0,message:"请确认开关状态",trigger:"blur"}],prefix:[{required:!0,message:"请输入后台接口后缀",trigger:"blur"}],cookie:[{required:!0,message:"请输入获取列表时的 Cookie",trigger:"blur"}],maxOnce:[{required:!0,message:"请输入批量解析时单次最大解析数量",trigger:"blur"}],sleep:[{required:!0,message:"请输入批量解析时休眠时间(秒)",trigger:"blur"}],password:[{validator:(I,i,g)=>{n.value.passwordSwitch&&i===""&&g(new Error("请输入密码")),g()},trigger:"blur"}],passwordSwitch:[{required:!0,message:"请确认开关状态",trigger:"blur"}]};fe(async()=>await r());const r=async()=>{n.value.getPending=!0;const I=await Re()??"failed";n.value.getPending=!1,I.toString()!=="failed"&&(n.value={...n.value,...I.data})},E=async I=>{if(I&&await I.validate(()=>{})){n.value.changePending=!0;const i=await qe({cookie:n.value.cookie,check:!0})??"failed";if(i.toString()==="failed")return;if(n.value.changePending=!1,i.message!=="cookie校验成功"){de.error("请不要使用包含账户的cookie,直接退出登陆获取一个新cookie");return}de.success("cookie校验成功,不包含账户");const g=await Le({...n.value})??"failed";if(n.value.changePending=!1,g.toString()==="failed")return;de.success("修改成功"),Ke(n.value.prefix),await r()}};return(I,i)=>{const g=ye,p=Ae,F=It,T=ct,x=Be,K=Te,q=Pe;return me((m(),w(K,{ref_key:"changeConfigFormRef",ref:a,model:e(n),rules:N,"label-width":"auto"},{default:f(()=>[d(p,{label:"版本号",prop:"version"},{default:f(()=>[d(g,{disabled:"",modelValue:e(n).version,"onUpdate:modelValue":i[0]||(i[0]=u=>e(n).version=u)},null,8,["modelValue"])]),_:1}),d(p,{label:"DEBUG模式开关",prop:"debug"},{default:f(()=>[d(F,{modelValue:e(n).debug,"onUpdate:modelValue":i[1]||(i[1]=u=>e(n).debug=u),size:"large"},null,8,["modelValue"])]),_:1}),d(p,{label:"强制SSL模式开关",prop:"ssl"},{default:f(()=>[d(F,{modelValue:e(n).ssl,"onUpdate:modelValue":i[2]||(i[2]=u=>e(n).ssl=u),size:"large"},null,8,["modelValue"])]),_:1}),d(p,{label:"公告开关",prop:"announceSwitch"},{default:f(()=>[d(F,{modelValue:e(n).announceSwitch,"onUpdate:modelValue":i[3]||(i[3]=u=>e(n).announceSwitch=u),size:"large"},null,8,["modelValue"])]),_:1}),d(p,{label:"公告内容",prop:"announce"},{default:f(()=>[d(g,{type:"textarea",modelValue:e(n).announce,"onUpdate:modelValue":i[4]||(i[4]=u=>e(n).announce=u),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),d(p,{label:"后台接口前缀",prop:"prefix"},{default:f(()=>[d(g,{modelValue:e(n).prefix,"onUpdate:modelValue":i[5]||(i[5]=u=>e(n).prefix=u),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),d(p,{label:"下载使用的 User_Agent",prop:"userAgent"},{default:f(()=>[d(g,{modelValue:e(n).userAgent,"onUpdate:modelValue":i[6]||(i[6]=u=>e(n).userAgent=u),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),d(p,{label:"批量解析时休眠时间(秒)",prop:"sleep"},{default:f(()=>[d(T,{modelValue:e(n).sleep,"onUpdate:modelValue":i[7]||(i[7]=u=>e(n).sleep=u)},null,8,["modelValue"])]),_:1}),d(p,{label:"批量解析时单次最大解析数量",prop:"maxOnce"},{default:f(()=>[d(T,{modelValue:e(n).maxOnce,"onUpdate:modelValue":i[8]||(i[8]=u=>e(n).maxOnce=u)},null,8,["modelValue"])]),_:1}),d(p,{label:"获取列表时的 Cookie",prop:"cookie"},{default:f(()=>[d(g,{type:"textarea",modelValue:e(n).cookie,"onUpdate:modelValue":i[9]||(i[9]=u=>e(n).cookie=u),modelModifiers:{trim:!0},rows:"5"},null,8,["modelValue"])]),_:1}),d(p,{label:"密码开关",prop:"passwordSwitch"},{default:f(()=>[d(F,{modelValue:e(n).passwordSwitch,"onUpdate:modelValue":i[10]||(i[10]=u=>e(n).passwordSwitch=u),size:"large"},null,8,["modelValue"])]),_:1}),d(p,{label:"密码",prop:"password"},{default:f(()=>[d(g,{modelValue:e(n).password,"onUpdate:modelValue":i[11]||(i[11]=u=>e(n).password=u),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),d(p,{label:" "},{default:f(()=>[d(x,{type:"primary",onClick:i[12]||(i[12]=u=>E(e(a))),loading:e(n).changePending},{default:f(()=>[xe(" 保存 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])),[[q,e(n).getPending]])}}});export{Mt as default};
