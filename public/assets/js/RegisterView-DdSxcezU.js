import{b as F,r as m,k as x,w as B,c as V,n as s,u as R,p as N,v as q,f as p,q as c,e as _,t as S,l as a,C as D,x as y,E as I,y as L,z as U,A,B as M}from"./.pnpm-CM6hScpc.js";import{g as $,u as h,a as z,r as K}from"./index-DLy4GwlQ.js";import{f as T}from"./favicon-BrYC5Vmz.js";import{r as j}from"./registerkeyDown-BdEXfbVb.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"container"},J=["src"],O=F({__name:"RegisterView",setup(P){const l=R();$()==="1"&&l.push("/admin");const b=()=>l.push("/login"),n=m(!1),e=m({username:"",password:"",inv_code:""}),u=m(null),f={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},g=h();g.config.need_inv_code&&(f.inv_code=[{required:!0,message:"请输入邀请码",trigger:"blur"}]);const v=async i=>{if(!(!i||!await i.validate()))try{n.value=!0,await K({username:e.value.username,password:e.value.password,inv_code:e.value.inv_code}),I.success("注册成功"),l.push("/login")}finally{n.value=!1}};return j("Enter",()=>v(u.value)),(i,o)=>{const d=L,r=U,w=A,k=M,E=N,C=q;return p(),x("div",H,[B((p(),V(E,null,{default:s(()=>[c("h1",null,[c("img",{src:_(T),alt:"logo"},null,8,J)]),c("h2",null,"注册 | "+S(_(z)()),1),a(k,{ref_key:"registerFormRef",ref:u,model:e.value,rules:f,"label-width":"auto"},{default:s(()=>[a(r,{label:"用户名",prop:"username"},{default:s(()=>[a(d,{modelValue:e.value.username,"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.username=t)},null,8,["modelValue"])]),_:1}),a(r,{label:"密码",prop:"password"},{default:s(()=>[a(d,{modelValue:e.value.password,"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.password=t),type:"password"},null,8,["modelValue"])]),_:1}),_(g).config.need_inv_code?(p(),V(r,{key:0,label:"邀请码",prop:"inv_code"},{default:s(()=>[a(d,{modelValue:e.value.inv_code,"onUpdate:modelValue":o[2]||(o[2]=t=>e.value.inv_code=t)},null,8,["modelValue"])]),_:1})):D("",!0),a(r,{class:"center"},{default:s(()=>[a(w,{type:"primary",onClick:o[3]||(o[3]=t=>b())},{default:s(()=>[y("登陆")]),_:1}),a(w,{type:"primary",onClick:o[4]||(o[4]=t=>v(u.value))},{default:s(()=>[y("注册")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[C,n.value]])])}}}),ee=G(O,[["__scopeId","data-v-e888aeb9"]]);export{ee as default};
