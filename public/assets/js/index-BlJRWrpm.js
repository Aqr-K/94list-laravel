const __vite__fileDeps=["assets/js/UserView-Z5CYCDz1.js","assets/js/.pnpm-DQd76FlD.js","assets/css/.pnpm-Cc2p1Lns.css","assets/css/UserView-V0M9nBA1.css","assets/js/LoginView-BL8DkMRV.js","assets/js/favicon-BrYC5Vmz.js","assets/js/_plugin-vue_export-helper-DlAUqK2U.js","assets/css/LoginView-kFAD-Fzo.css","assets/js/RegisterView-Bf2vplWa.js","assets/css/RegisterView-BnKfmdM9.css","assets/js/AdminView-E-FK1-7p.js","assets/js/InstallView-BJbJ-sRd.js","assets/css/InstallView-CRaRKPdy.css","assets/js/NotFoundView-CsgaDcNZ.js","assets/css/NotFoundView-B8o8jygP.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{a as S,E as d,d as w,r as b,b as A,o as R,c as I,u as P,e as k,R as O,f as C,g as T,h as $,i as D}from"./.pnpm-DQd76FlD.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();const V="modulepreload",x=function(e){return"/"+e},f={},m=function(r,t,s){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),a=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));o=Promise.all(t.map(c=>{if(c=x(c),c in f)return;f[c]=!0;const g=c.endsWith(".css"),E=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${E}`))return;const l=document.createElement("link");if(l.rel=g?"stylesheet":V,g||(l.as="script",l.crossOrigin=""),l.href=c,a&&l.setAttribute("nonce",a),document.head.appendChild(l),g)return new Promise((v,L)=>{l.addEventListener("load",v),l.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${c}`)))})}))}return o.then(()=>r()).catch(n=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=n,window.dispatchEvent(a),!a.defaultPrevented)throw n})},z=()=>localStorage.getItem("login_state")??"0",p=e=>localStorage.setItem("login_state",e),J=()=>localStorage.getItem("login_role")??"user",h=e=>localStorage.setItem("login_role",e),q=()=>localStorage.getItem("announce")??"",W=e=>localStorage.setItem("announce",e),H=async()=>(await m(async()=>{const{default:e}=await import("./package-B5aEhLMX.js");return{default:e}},[])).default.version,M=()=>{var e;return((e=document.querySelector("meta[name='app_name']"))==null?void 0:e.getAttribute("content"))??"94list-laravel"},K=()=>{const e=localStorage.getItem("aria2_config");return e?JSON.parse(e):{host:"http://localhost",port:6800,token:""}},G=e=>localStorage.setItem("aria2_config",JSON.stringify(e)),i=S.create({baseURL:"/api",timeout:1/0,headers:{Accept:"application/json","Content-Type":"application/json"}});i.interceptors.response.use(e=>e.data,e=>{var t;const r=(t=e.response.data)==null?void 0:t.message;return r?r==="用户未登陆"?(d.error("登陆已过期, 请重新登陆!"),p("0"),setTimeout(()=>location.href="/login",1e3)):r==="Too Many Attempts."?d.error("请求量过大! 请等待10分钟后重试!"):r==="用户权限不足"?(d.error("用户权限不足, 请联系管理员!"),h("user"),setTimeout(()=>location.href="/user",1e3)):d.error(r):(d.error("服务器异常, 请稍后再试"),console.log(e)),Promise.reject(e.response.data)});const u=e=>typeof e=="string"?parseInt(e):e,N=()=>i.get("/parse/config"),Q=async e=>{const r=await i.post("/parse/get_file_list",e);return r.data.list=r.data.list.map(t=>(t.category=u(t.category),t.fs_id=u(t.fs_id),t.isdir=u(t.isdir),t.local_ctime=u(t.local_ctime),t.local_mtime=u(t.local_mtime),t.server_ctime=u(t.local_mtime),t.server_mtime=u(t.local_mtime),t.size=u(t.size),t)),r},X=e=>i.post("/parse/get_vcode",e),Y=e=>i.post("/parse/get_download_links",e),Z=e=>i.get(`/parse/limit?token=${e.token}`),ee=e=>i.post("/user/login",e),te=e=>i.post("/user/register",e),j=()=>i.delete("/user"),B=w("mainStore",()=>{const e=b({show_announce:!1,announce:"",debug:!1,max_once:0,have_account:!1,have_login:!1,need_inv_code:!1,need_password:!1,is_https:!1,show_copyright:!1,custom_copyright:"",min_single_file:0,token_mode:!1,button_link:""});return{config:e,logout:async()=>{try{await j()}finally{p("0"),h("user"),location.reload(),d.success("退出登陆成功~")}},getConfig:async()=>{const o=(await N()).data;o.announce=o.announce.replaceAll("[NextLine]","<br>"),o.announce===q()&&(o.show_announce=!1),e.value={...o,is_https:document.location.protocol==="https:"},p(o.have_login?"1":"0")}}}),F=A({__name:"App",setup(e){const r=B();function t(){const s="0123456789ABCDEF";let o="#";for(let n=0;n<6;n++)o+=s[Math.floor(Math.random()*16)];return o}return R(async()=>{console.info(`%c
 █████╗   ██╗  ██╗  ██╗       ██╗  ███████╗  ████████╗          ██╗        █████╗   ██████╗    █████╗   ██╗   ██╗  ███████╗  ██╗     
██╔══██╗  ██║  ██║  ██║       ██║  ██╔════╝  ╚══██╔══╝          ██║       ██╔══██╗  ██╔══██╗  ██╔══██╗  ██║   ██║  ██╔════╝  ██║     
╚██████║  ███████║  ██║       ██║  ███████╗     ██║     █████╗  ██║       ███████║  ██████╔╝  ███████║  ██║   ██║  █████╗    ██║     
 ╚═══██║  ╚════██║  ██║       ██║  ╚════██║     ██║     ╚════╝  ██║       ██╔══██║  ██╔══██╗  ██╔══██║  ╚██╗ ██╔╝  ██╔══╝    ██║     
 █████╔╝       ██║  ███████╗  ██║  ███████║     ██║             ███████╗  ██║  ██║  ██║  ██║  ██║  ██║   ╚████╔╝   ███████╗  ███████╗
 ╚════╝        ╚═╝  ╚══════╝  ╚═╝  ╚══════╝     ╚═╝             ╚══════╝  ╚═╝  ╚═╝  ╚═╝  ╚═╝  ╚═╝  ╚═╝    ╚═══╝    ╚══════╝  ╚══════╝ `,`font-family: courier; background: linear-gradient(to right, ${t()}, ${t()});-webkit-background-clip: text;color: transparent;`);const s=window.matchMedia("(prefers-color-scheme: dark)");o(s),s.addEventListener("change",o);function o(n){n.matches?document.querySelector("html").classList.add("dark"):document.querySelector("html").classList.remove("dark")}await r.getConfig()}),(s,o)=>(k(),I(P(O)))}}),y=C({history:T("/"),routes:[{path:"/",name:"index",redirect:"/user"},{path:"/user",name:"user",meta:{title:"前台解析中心"},component:()=>m(()=>import("./UserView-Z5CYCDz1.js"),__vite__mapDeps([0,1,2,3]))},{path:"/login",name:"login",meta:{title:"登陆"},component:()=>m(()=>import("./LoginView-BL8DkMRV.js"),__vite__mapDeps([4,1,2,5,6,7]))},{path:"/register",name:"register",meta:{title:"注册"},component:()=>m(()=>import("./RegisterView-Bf2vplWa.js"),__vite__mapDeps([8,1,2,5,6,9]))},{path:"/admin",name:"admin",meta:{title:"后台控制中心"},component:()=>m(()=>import("./AdminView-E-FK1-7p.js"),__vite__mapDeps([10,1,2]))},{path:"/install",name:"install",meta:{title:"安装"},component:()=>m(()=>import("./InstallView-BJbJ-sRd.js"),__vite__mapDeps([11,1,2,5,6,12]))},{path:"/404",name:"404",meta:{title:"404页面不存在"},component:()=>m(()=>import("./NotFoundView-CsgaDcNZ.js"),__vite__mapDeps([13,1,2,14]))},{path:"/:pathMatch(.*)",redirect:"/404"}]});y.beforeEach((e,r,t)=>{document.title=`${e.meta.title} | ${M()}`,t()});const _=$(F);_.use(D());_.use(y);_.mount("#app");export{m as _,M as a,h as b,J as c,W as d,Q as e,Y as f,z as g,X as h,i,Z as j,K as k,ee as l,G as m,H as n,te as r,p as s,B as u};
